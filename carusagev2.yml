openapi: 3.0.0
info:
  description: This API describes cars' usage
  version: "2.0.0-oas3"
  title: Car Usage API
  contact:
    email: daveapplicliente@gmail.com
  license:
    name: Apache 2.0
    url: 'http://www.apache.org/licenses/LICENSE-2.0.html'
tags:
  - name: events
    description: events generated by using the car
paths:
  /v2/events:
    get:
      tags:
        - events
      summary: searches cars' usage events
      description: >
        By passing in the appropriate options (carId, date, lat, lng), you can
        search for available events related to the cars' usage. 
      operationId: searchEvents
      parameters:
        - name: carId
          in: query
          description: pass an optional carID to look for events linked to the carId
          required: false
          schema:
            type: string
            format: uuid
        - name: date
          in: query
          description: pass an optional date to look for events at this date
          required: false
          schema:
            type: string
            format: date-time
        - name: lat
          in: query
          description: pass a latitude to look for events at this location
          required: false
          schema:
            type: number
            format: float
        - name: lng
          in: query
          description: pass a longitude to look for events at this location
          required: false
          schema:
            type: number
            format: float
        - name: skip
          in: query
          description: number of records to skip for pagination
          required: false
          schema:
            type: integer
            format: int32
            minimum: 0
        - name: limit
          in: query
          description: maximum number of records to return
          required: false
          schema:
            type: integer
            format: int32
            minimum: 0
            maximum: 50
      security:
        - api_key: []
      responses:
        '200':
          description: list of events matching with the search criteria
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: 'https://raw.githubusercontent.com/daveapplicliente/car-usage/master/carusage.yml#/components/schemas/event'
        '400':
          description: bad or missing input parameter.
        '401':
          description: unauthorized
        '403':
          description: forbidden
        '404':
          description: Not Found  The requested resource doesn’t exist.
        '412':
          description: precondition failed
        '500':
          description: technical error
  '/v2/events/{carId}':
    post:
      tags:
        - events
      summary: create cars' usage event
      description: Cars send events that are created via this API
      operationId: createEvents
      parameters:
        - name: carId
          in: path
          description: pass the carID to create the event linked to the carId
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        description: send an Events object in json format
        required: true
        content:
          application/json:
            schema:
              $ref: 'https://raw.githubusercontent.com/daveapplicliente/car-usage/master/carusage.yml#/components/schemas/event'
      security:
        - api_key: []
      responses:
        '200':
          description: event has been created
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: 'https://raw.githubusercontent.com/daveapplicliente/car-usage/master/carusage.yml#/components/schemas/event'
        '400':
          description: bad or missing input parameter.
        '401':
          description: unauthorized
        '403':
          description: forbidden
        '404':
          description: Not Found  The requested resource doesn’t exist.
        '412':
          description: precondition failed
        '500':
          description: technical error
servers:
  - url: 'https://virtserver.swaggerhub.com/August1/carusage/1.0.0'
components:
  securitySchemes:
    api_key:
      type: apiKey
      name: X-API-KEY
      in: header